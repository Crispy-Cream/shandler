<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: interaction.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: interaction.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { APIMessage } = require("discord.js")
const {createAPIMessage} = require('./api')
const FInteraction = require('./FInteraction')

const Callback = async (res, data) =>{
    if (!data || !res) return;
    if (!res.token) throw new Error('Token missing');
    data.token = res.token
    let guild = res.guild
    let member = res.member
    let channel = res.channel
    let extras = {
        member,
        channel,
        guild
    }
    let interaction = new FInteraction(res.client, data, extras)
    return interaction;
}

class Interaction {
    /**
     * Class for replaying to an interaction or other purposes
     * @param {Object} interaction - Raw interaction object from the api
     * @param {*} options - Extra data
     */
    constructor(interaction, options){
        
        let { channel, guild, client, member } = options
        this.type = interaction.type
        this.token = interaction.token
        this.member = member
        this.id = interaction.id
        this.client = client
        this.guild = guild
        this.data = interaction.data
        this.channel = channel

    }
    /**
     * Sends an Interaction response
     * @param {String} res - The message string or embed object
     * @param {Options} options - Options that should be passed to the api
     * @returns {Object}  FInteraction object
     * @example
     * interaction.reply("Bello")
     */
     async reply(res, options = {}){
        let data;
        if (!res &amp;&amp; !options.embed &amp;&amp; !options.embeds) throw new Error('Cannot send an empty message.')
        if (typeof res == 'string'){
            data = {
                content:res
            }
        }else{
            data = await createAPIMessage(this, res, this.client)
        }
        return this.client.api.interactions(this.id, this.token).callback
        .post({ data:{
            type: (options?.type ? options?.type : 4),
            data:data
        } })
        .then(async (m) => await Callback(this, m))
    }
    
}
module.exports = Interaction</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FInteraction.html">FInteraction</a></li><li><a href="Interaction.html">Interaction</a></li><li><a href="SHClient.html">SHClient</a></li></ul><h3>Events</h3><ul><li><a href="SHClient.html#event:interaction">interaction</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Apr 06 2021 13:58:39 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
